generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  // url      = "mysql://root:aluno@localhost:3306/locacao-espaco"
}

model User {
  id          Int @id @default(autoincrement()) //Alguém deixou o ID como string e se for string, não da para usar o autoincrement()
  username    String @db.VarChar(30) //Favor não errar para que isso não se repita KKKKK (contém ironia)
  fullname    String? @db.VarChar(50)
  email       String? @unique(map: "email_UNIQUE") @db.VarChar(200)
  cpf         String? @db.VarChar(11)
  phone       String? @db.VarChar(11)
  address     String? @db.VarChar(100)
  state       String? @db.VarChar(2)
  city        String? @db.VarChar(50)
  cep         String? @db.VarChar(8)
  photo       String? @db.VarChar(255)
  roleId      Int?
  anuncio     Anuncio[]
  classification  Classification[]

  role    Role? @relation(fields: [roleId], references: [id])
}

model Role {
  id        Int @id @default(autoincrement())
  descricao String @db.VarChar(30)
  user      User[]
}

model Anuncio {
  id             Int @id @default(autoincrement())
  title          String @db.VarChar(40)
  address        String @db.VarChar(100)
  description    String @db.VarChar(200)
  userId         Int
  tipoImovelId   Int
  tipoEspacoId   Int
  qtdMaxHospedes Int
  tipoespaco     TipoEspaco @relation(fields: [tipoEspacoId], references: [id], map: "Anuncio_tipoEspacoId_fkey")
  tipoimovel     TipoImovel @relation(fields: [tipoImovelId], references: [id], map: "Anuncio_tipoImovelId_fkey")
  user           User       @relation(fields: [userId], references: [id], map: "Anuncio_userId_fkey")

  @@index([tipoEspacoId], map: "Anuncio_tipoEspacoId_fkey")
  @@index([tipoImovelId], map: "Anuncio_tipoImovelId_fkey")
  @@index([userId], map: "Anuncio_userId_fkey")
}



model TipoEspaco {
  id        Int    @id @default(autoincrement())
  descricao String    @db.VarChar(30)
  anuncio   Anuncio[]
}

model TipoImovel {
  id        Int    @id @default(autoincrement())
  descricao String    @db.VarChar(30)
  anuncio   Anuncio[]
}

model Classification {
  id      Int @id @default(autoincrement())
  userId  Int
  grade   Int

  user    User @relation(fields: [userId], references: [id])
}
